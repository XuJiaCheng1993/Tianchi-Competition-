# Tianchi-Competition-MeiNianAI
- 3月底比赛刚开始的时候就报名参加了，但是忙于手头的事情，一直没有着手做
- 4月底刚好有一段空闲时间加上五一小长假，就完成了基本的代码
- 本部分代码包括初赛和复赛两个部分，复赛为平台赛，所有代码在阿里云的服务器上进行完成
- 最终的成绩是初赛62复赛39，花的时间不是很多，精力也主要集中在模型调参和融合上，对于NLP问题的处理远远不如排名靠前的大佬

## 整体流程
不管是初赛还是复赛，都包含以下四个部分:
- **数据清洗** 
- **特征工程**
- **单模型建模**
- **模型融合**

### 数据清洗
- 原始数据中包含很多缺失以及脏数据，该部分代码借用了技术圈大佬Jean_V的文章
- 开始平台赛以为必须使用SQL，后来有大佬指出可以用PYOPDS，于是就相当于把初赛的python3代码用python2复现了一遍。

### 特征工程
- 刚开始以为是只有纯数字特征，后来拿到数据发现，大头的都是文本特征，小头的才是数字特征
- 因为也没接触过NLP，对文本特征的处理，只是简单的检测其中是否包含某些关键字，并映射成0或1的数字特征
- 复赛中加入了基因特征，同样也是映射成数字。

### 单模型建模
- 初赛时，采用lightgbm模型。
- 复赛时，平台上不让用lightgbm就采用了scikit-learn自带的GBDT模型和RF模型进行代替

### 模型融合
- 初赛时，用于lightgnm的强大性能，基本没有做融合，只是简单的将，缺失值均值填充 和 缺失值零值填充 的两种模型进行了融合。
- 复赛时，采用了两层stack模型进行融合，采用的模型为LR,SVR和Ridge三种线性模型

## 总结
- **初赛**
- 五一的时候在写完基本的框架之后，花了很多时间对第三个参数进行优化，包括一些过采样还是降采样的方法，效果都不理想。当时的主要特征有数字特征和部分简单处理的文本特征，得分在0.0302左右
- 后来有大佬分享思路，通过优化文本特征就能得到飞升，于是对文本特征追加了一些新的处理。新增了文本的字符数作为特征，除此之外还增加了一些重点检查项目作为特征如'0102','0409','0434','4001','A202'，这样之后分数大概提升到了0.0292
- 最终就行简单的模型融合之后，分数大约为0.0291
- **复赛**
- 复赛的数据量少了一个数量级，此外还增加了基因特征，总特征数可达到1000，基本上和样本数处于一个数量级了。
- 而且由于是平台赛，对任务的运行时间有限制，大约运行时间超过600s就会被kill，因此第一步采用了简单的过滤式特征选择方法，筛选了大概300左右的特征。
- 之后也是训练了大量GBDT和RF模型，单模型最佳得分在0.037左右
- 模型融合时采用两层stack，第一层为gbdt和rf的各模型，第二层为gbdt和rf的个模型加上第一层所得的LR,SVR和Ridge三个模型，模型融合得分在0.028左右。

